<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <title>GCAN ‚Äî Gest√£o Campos Airsoft Norte</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#111618" />

  <!-- Favicons (ajusta se os nomes/paths forem diferentes) -->
  <link rel="icon" type="image/png" href="assets/img/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="assets/img/favicon/favicon.svg" />
  <link rel="shortcut icon" href="assets/img/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="assets/img/favicon/site.webmanifest" />

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <strong>GCAN</strong>
      <span>Gest√£o Campos Airsoft Norte</span>
    </div>

    <div class="top-actions">
      <span id="sessionInfo" class="muted"></span>
      <button id="btnCreate" class="btn" hidden>‚ûï Criar Jogo</button>
      <button id="btnUsers" class="btn" hidden>üë• Moderadores</button>
      <button id="btnLogs" class="btn" hidden>üìú Logs</button>
      <button id="btnAdmin" class="btn ghost">‚öôÔ∏è Admin</button>
    </div>
  </header>

  <section class="hero">
    <h1>üéØ Jogos de Airsoft ‚Äî Norte</h1>
    <p>Consulta jogos, vagas dispon√≠veis e inscreve-te.</p>
    <button id="ctaGo" class="btn ok">Ver Jogos</button>
  </section>

  <section class="filters">
    <input id="search" placeholder="Pesquisar jogo, campo, local‚Ä¶" />
    <div id="filters" role="tablist" aria-label="Filtros r√°pidos">
      <button class="chip active" data-filter="all" aria-selected="true" type="button">Todos</button>
      <button class="chip" data-filter="open" aria-selected="false" type="button">Abertos</button>
      <button class="chip" data-filter="lotado" aria-selected="false" type="button">Lotados</button>
      <button class="chip" data-filter="closed" aria-selected="false" type="button">Fechados</button>
      <button class="chip" data-filter="pinned" aria-selected="false" type="button">üìå Fixados</button>
      <button class="chip" data-filter="guests" aria-selected="false" type="button">S√≥ Convidados</button>
    </div>
  </section>

  <main id="grid" aria-busy="false"></main>

  <footer class="footer">
    <p><strong>Seguran√ßa:</strong> √ìculos obrigat√≥rios ¬∑ Respeitar FPS ¬∑ Fair-Play</p>
    <p>GCAN ¬© <span id="year"></span></p>
  </footer>

  <!-- Overlay / Modais -->
  <div id="overlay" class="overlay" hidden></div>

  <!-- Toasts -->
  <div class="toasts"></div>

  <!-- ===================== TEMPLATES DOS MODAIS ===================== -->

  <!-- LOGIN -->
  <template id="tpl-login">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Admin">
      <div class="modal-hd">
        <h3>Admin</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>

      <div class="modal-bd">
        <label class="lbl">Utilizador</label>
        <input id="lg_user" class="inp" autocomplete="username" />

        <label class="lbl">Senha</label>
        <input id="lg_pass" class="inp" type="password" autocomplete="current-password" />

        <p class="muted" style="margin-top:10px">
          (demo) admin / airsoft2025
        </p>
      </div>

      <div class="modal-ft">
        <button id="confirmLogin" class="btn ok">Entrar</button>
      </div>
    </div>
  </template>

  <!-- JOIN -->
  <template id="tpl-join">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Inscri√ß√£o">
      <div class="modal-hd">
        <h3>Inscrever</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>

      <div class="modal-bd">
        <input id="joinGameId" type="hidden" />

        <label class="lbl">Nickname</label>
        <input id="nickname" class="inp" placeholder="Ex: Ghost" />

        <label class="lbl">Equipa (opcional)</label>
        <input id="team" class="inp" placeholder="Ex: Bravo" />

        <div class="row" style="align-items:center; gap:10px; margin-top:10px">
          <input id="guest" type="checkbox" />
          <label for="guest">Convidado (sem APD)</label>
        </div>

        <label class="lbl" style="margin-top:10px">APD (se n√£o for convidado)</label>
        <input id="apd" class="inp" placeholder="Ex: APD1234" />

        <div class="row" style="align-items:center; gap:10px; margin-top:12px">
          <input id="consent" type="checkbox" />
          <label for="consent">Aceita que os dados sejam guardados para gest√£o da lista.</label>
        </div>

        <div class="row" style="align-items:center; gap:10px; margin-top:8px">
          <input id="rememberMe" type="checkbox" />
          <label for="rememberMe">Lembrar dados neste dispositivo</label>
        </div>
      </div>

      <div class="modal-ft">
        <button id="confirmJoin" class="btn ok">Confirmar</button>
      </div>
    </div>
  </template>

  <!-- LEAVE -->
  <template id="tpl-leave">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Sair">
      <div class="modal-hd">
        <h3>Remover inscri√ß√£o</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>

      <div class="modal-bd">
        <input id="leaveGameId" type="hidden" />
        <p>Confirmar remo√ß√£o da inscri√ß√£o?</p>
      </div>

      <div class="modal-ft">
        <button id="confirmLeave" class="btn danger">Confirmar</button>
      </div>
    </div>
  </template>

  <!-- LISTA R√ÅPIDA -->
  <template id="tpl-list">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Lista r√°pida">
      <div class="modal-hd">
        <h3>Lista R√°pida</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>

      <div class="modal-bd">
        <div id="listContent"></div>
      </div>

      <div class="modal-ft" style="gap:10px">
        <button id="btnPrintList" class="btn">üñ®Ô∏è Imprimir</button>
        <button id="btnXlsList" class="btn">üìó Excel</button>
      </div>
    </div>
  </template>

  <!-- CRIAR/EDITAR JOGO -->
  <template id="tpl-upsert">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Criar/Editar jogo">
      <div class="modal-hd">
        <h3 id="upsertTitle">Criar Jogo</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>

      <div class="modal-bd">
        <input id="u_id" type="hidden" />

        <label class="lbl">T√≠tulo</label>
        <input id="u_title" class="inp" placeholder="Ex: STG CQB" />

        <label class="lbl">Descri√ß√£o</label>
        <input id="u_desc" class="inp" placeholder="Ex: Treino CQB 9x9x9" />

        <div class="grid2">
          <div>
            <label class="lbl">Data/Hora</label>
            <input id="u_date" class="inp" type="datetime-local" />
          </div>
          <div>
            <label class="lbl">Vagas</label>
            <input id="u_total" class="inp" type="number" min="1" value="20" />
          </div>
        </div>

        <label class="lbl">Local</label>
        <input id="u_loc" class="inp" placeholder="Braga, Portugal" />

        <label class="lbl">Coordenadas (opcional) ‚Äî ‚Äúlat,lng‚Äù</label>
        <input id="u_coords" class="inp" placeholder="41.545,-8.426" />

        <label class="lbl">Imagem do header (opcional)</label>
        <input id="u_img" class="inp" placeholder="URL (ou deixa vazio para camuflado)" />

        <label class="lbl">Bras√£o (opcional)</label>
        <input id="u_crest" class="inp" placeholder="URL do bras√£o do campo/equipa" />

        <div class="grid2">
          <div>
            <label class="lbl">Campo</label>
            <input id="u_field" class="inp" placeholder="Ex: STG" />
          </div>
          <div>
            <label class="lbl">Estado</label>
            <select id="u_status" class="inp">
              <option value="open">Aberto</option>
              <option value="closed">Fechado</option>
            </select>
          </div>
        </div>

        <div class="row" style="align-items:center; gap:10px; margin-top:10px">
          <input id="u_pinned" type="checkbox" />
          <label for="u_pinned">Fixar (üìå)</label>
        </div>
      </div>

      <div class="modal-ft">
        <button id="confirmUpsert" class="btn ok">Guardar</button>
      </div>
    </div>
  </template>

  <!-- MODERADORES -->
  <template id="tpl-users">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Moderadores">
      <div class="modal-hd">
        <h3>Moderadores</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>

      <div class="modal-bd">
        <div id="usersList" class="muted">A carregar‚Ä¶</div>

        <hr class="sep" />

        <h4>Criar moderador</h4>
        <label class="lbl">Utilizador</label>
        <input id="nu_user" class="inp" placeholder="ex: mod_stg" />

        <label class="lbl">Senha</label>
        <input id="nu_pass" class="inp" placeholder="ex: mod2025" />

        <label class="lbl">Campo (ex: STG)</label>
        <input id="nu_field" class="inp" />

        <label class="lbl">Bras√£o do campo (URL opcional)</label>
        <input id="nu_crest" class="inp" />
      </div>

      <div class="modal-ft">
        <button id="btnCreateUser" class="btn ok">Criar</button>
      </div>
    </div>
  </template>

  <!-- LOGS -->
  <template id="tpl-logs">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Logs">
      <div class="modal-hd">
        <h3>Logs</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>

      <div class="modal-bd">
        <div id="logsContent" class="muted">A carregar‚Ä¶</div>
      </div>

      <div class="modal-ft" style="gap:10px">
        <button id="btnExportLogsCsv" class="btn">üì§ CSV</button>
        <button id="btnExportLogsXls" class="btn">üìó Excel</button>
      </div>
    </div>
  </template>

  <script src="app.js"></script>
</body>
</html>
