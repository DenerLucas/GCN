<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <title>GCAN ‚Äî Gest√£o Campos Airsoft Norte</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#111618" />

  <!-- Favicons (pasta: assets/img/favicon/) -->
  <link rel="icon" type="image/png" href="assets/img/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="assets/img/favicon/favicon.svg" />
  <link rel="shortcut icon" href="assets/img/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="assets/img/favicon/site.webmanifest" />

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <strong>GCAN</strong>
      <span>Gest√£o Campos Airsoft Norte</span>
    </div>

    <div class="top-actions">
      <span id="sessionInfo" class="muted"></span>
      <button id="btnLogs" class="btn" hidden>üìú Logs</button>
      <button id="btnUsers" class="btn" hidden>üë• Moderadores</button>
      <button id="btnCreate" class="btn" hidden>‚ûï Criar Jogo</button>
      <button id="btnAdmin" class="btn ghost" aria-pressed="false">‚öôÔ∏è Admin</button>
    </div>
  </header>

  <section class="hero">
    <h1>üéØ Jogos de Airsoft ‚Äî Norte</h1>
    <p>Consulta jogos, vagas dispon√≠veis e inscreve-te.</p>
    <button id="ctaGo" class="btn ok">Ver Jogos</button>
  </section>

  <section class="filters">
    <input id="search" placeholder="Pesquisar jogo, campo, local‚Ä¶" />
    <div id="filters" class="chips" role="tablist" aria-label="Filtros r√°pidos">
      <button class="chip active" data-filter="all" aria-selected="true" type="button">Todos</button>
      <button class="chip" data-filter="open" aria-selected="false" type="button">Abertos</button>
      <button class="chip" data-filter="lotado" aria-selected="false" type="button">Lotados</button>
      <button class="chip" data-filter="closed" aria-selected="false" type="button">Fechados</button>
      <button class="chip" data-filter="pinned" aria-selected="false" type="button">üìå Fixados</button>
      <button class="chip" data-filter="guests" aria-selected="false" type="button">S√≥ Convidados</button>
    </div>
  </section>

  <main id="grid" aria-busy="false"></main>

  <footer class="footer">
    <p><strong>Seguran√ßa:</strong> √ìculos obrigat√≥rios ¬∑ Respeitar FPS ¬∑ Fair-Play</p>
    <p>GCAN ¬© <span id="year"></span></p>
  </footer>

  <!-- Overlay / Modais -->
  <div id="overlay" class="overlay" hidden></div>

  <!-- Toasts -->
  <div class="toasts"></div>

  <!-- ===================== TEMPLATES (MODAIS) ===================== -->

  <!-- Login -->
  <template id="tpl-login">
    <div class="modal">
      <div class="modal-hd">
        <h3>Login de Administrador</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>
      <div class="modal-bd">
        <label>Utilizador</label>
        <input id="lg_user" autocomplete="username" />

        <label>Palavra-passe</label>
        <input id="lg_pass" type="password" autocomplete="current-password" />

        <p class="muted" style="margin-top:10px;">
          Demo: admin / airsoft2025 ‚Äî (podes trocar depois no backend)
        </p>
      </div>
      <div class="modal-ft">
        <button class="btn ghost" data-close>Cancelar</button>
        <button id="confirmLogin" class="btn ok">Entrar</button>
      </div>
    </div>
  </template>

  <!-- Join -->
  <template id="tpl-join">
    <div class="modal">
      <div class="modal-hd">
        <h3>Inscri√ß√£o</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>
      <div class="modal-bd">
        <input id="joinGameId" hidden />

        <label>Nickname</label>
        <input id="nickname" placeholder="Ex: Ghost" />

        <label>Equipa (opcional)</label>
        <input id="team" placeholder="Ex: Alpha" />

        <div class="row" style="align-items:center; gap:10px; margin-top:10px;">
          <input id="guest" type="checkbox" />
          <label for="guest" style="margin:0;">Convidado (sem APD)</label>
        </div>

        <label style="margin-top:10px;">APD</label>
        <input id="apd" placeholder="Ex: APD1234" />

        <div class="row" style="align-items:center; gap:10px; margin-top:10px;">
          <input id="rememberMe" type="checkbox" />
          <label for="rememberMe" style="margin:0;">Guardar dados para a pr√≥xima</label>
        </div>

        <div class="row" style="align-items:center; gap:10px; margin-top:10px;">
          <input id="consent" type="checkbox" />
          <label for="consent" style="margin:0;">Aceita o consentimento de dados (m√≠nimo necess√°rio).</label>
        </div>
      </div>

      <div class="modal-ft">
        <button class="btn ghost" data-close>Cancelar</button>
        <button id="confirmJoin" class="btn ok">Confirmar</button>
      </div>
    </div>
  </template>

  <!-- Leave -->
  <template id="tpl-leave">
    <div class="modal">
      <div class="modal-hd">
        <h3>Sair do jogo</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>
      <div class="modal-bd">
        <input id="leaveGameId" hidden />
        <p>Confirmas que queres remover a tua inscri√ß√£o?</p>
      </div>
      <div class="modal-ft">
        <button class="btn ghost" data-close>Cancelar</button>
        <button id="confirmLeave" class="btn danger">Sair</button>
      </div>
    </div>
  </template>

  <!-- Lista r√°pida -->
  <template id="tpl-list">
    <div class="modal wide">
      <div class="modal-hd">
        <h3>Lista R√°pida</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>
      <div class="modal-bd">
        <div id="listContent"></div>
      </div>
      <div class="modal-ft">
        <button id="btnPrintList" class="btn">üñ®Ô∏è Imprimir</button>
        <button id="btnXlsList" class="btn">üìó Excel</button>
        <button class="btn ghost" data-close>Fechar</button>
      </div>
    </div>
  </template>

  <!-- Criar/Editar jogo -->
  <template id="tpl-upsert">
    <div class="modal wide">
      <div class="modal-hd">
        <h3 id="upsertTitle">Criar Jogo</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>

      <div class="modal-bd">
        <input id="u_id" hidden />

        <div class="grid2">
          <div>
            <label>T√≠tulo</label>
            <input id="u_title" placeholder="Ex: STG Night Ops" />
          </div>

          <div>
            <label>Campo</label>
            <input id="u_field" placeholder="Ex: STG / ARCANJOS / TSL" />
          </div>

          <div>
            <label>Data/hora</label>
            <input id="u_date" type="datetime-local" />
          </div>

          <div>
            <label>Total de vagas</label>
            <input id="u_total" type="number" min="1" />
          </div>

          <div class="span2">
            <label>Descri√ß√£o</label>
            <input id="u_desc" placeholder="Ex: Skirmish dominical" />
          </div>

          <div>
            <label>Local (texto)</label>
            <input id="u_loc" placeholder="Ex: Braga, Portugal" />
          </div>

          <div>
            <label>Coords (lat,lng) opcional</label>
            <input id="u_coords" placeholder="41.545,-8.426" />
          </div>

          <div class="span2">
            <label>Imagem de fundo (URL) ‚Äî opcional</label>
            <input id="u_img" placeholder="https://..." />
          </div>

          <div class="span2">
            <label>Bras√£o (URL) ‚Äî opcional</label>
            <input id="u_crest" placeholder="https://..." />
          </div>

          <div>
            <label>Estado</label>
            <select id="u_status">
              <option value="open">Aberto</option>
              <option value="closed">Fechado</option>
            </select>
          </div>

          <div class="row" style="align-items:center; gap:10px;">
            <input id="u_pinned" type="checkbox" />
            <label for="u_pinned" style="margin:0;">üìå Fixar no topo</label>
          </div>
        </div>
      </div>

      <div class="modal-ft">
        <button class="btn ghost" data-close>Cancelar</button>
        <button id="confirmUpsert" class="btn ok">Guardar</button>
      </div>
    </div>
  </template>

  <!-- Moderadores -->
  <template id="tpl-users">
    <div class="modal wide">
      <div class="modal-hd">
        <h3>Moderadores</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>
      <div class="modal-bd">
        <div id="usersList" class="muted">A carregar‚Ä¶</div>

        <hr style="margin:16px 0; opacity:.2;" />

        <h4>Criar moderador</h4>
        <div class="grid2">
          <div>
            <label>Utilizador</label>
            <input id="nu_user" placeholder="ex: mod_stg" />
          </div>
          <div>
            <label>Senha</label>
            <input id="nu_pass" placeholder="ex: mod2025" />
          </div>
          <div>
            <label>Campo</label>
            <input id="nu_field" placeholder="ex: STG" />
          </div>
          <div>
            <label>Bras√£o do campo (URL)</label>
            <input id="nu_crest" placeholder="https://..." />
          </div>
        </div>

        <button id="btnCreateUser" class="btn ok" style="margin-top:10px;">Criar</button>
      </div>
      <div class="modal-ft">
        <button class="btn ghost" data-close>Fechar</button>
      </div>
    </div>
  </template>

  <!-- Logs -->
  <template id="tpl-logs">
    <div class="modal wide">
      <div class="modal-hd">
        <h3>Logs de Auditoria</h3>
        <button class="btn ghost" data-close aria-label="Fechar">‚úñÔ∏è</button>
      </div>
      <div class="modal-bd">
        <div id="logsContent" class="muted">A carregar‚Ä¶</div>
      </div>
      <div class="modal-ft">
        <button id="btnExportLogsCsv" class="btn">üì§ CSV</button>
        <button id="btnExportLogsXls" class="btn">üìó Excel</button>
        <button class="btn ghost" data-close>Fechar</button>
      </div>
    </div>
  </template>

  <script src="app.js"></script>
</body>
</html>
